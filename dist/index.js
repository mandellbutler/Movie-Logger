const router=require("express").Router(),{Rating,User,Movie}=require("../../models");router.post("/:movie_id",async(a,b)=>{const c=await Rating.findAll({where:{movie_id:a.params.movie_id,user_id:a.session.user_id}});if(c[0]){const c=await Rating.update({user_rating:await a.body.rating},{where:{movie_id:a.params.movie_id,user_id:a.session.user_id}});c[0]?b.status(200).json("rating updated."):b.status(500).json("500")}else{const c=await Rating.create({user_rating:a.body.rating,movie_id:a.params.movie_id,user_id:a.session.user_id});c?b.status(200).json("rating created."):b.status(500).json("500")}}),module.exports=router;